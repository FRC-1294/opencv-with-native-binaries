language: java
jdk: oraclejdk8
addons:
  apt:
    sources:
    - sourceline: ppa:mc3man/trusty-media
    packages:
    - libavcodec-dev
    - libavformat-dev
    - libswscale-dev
    - libv4l-dev
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
script:
- "./gradlew clean build"
before_deploy: "./gradlew generatePomFileForOpenCVPublication generateBintrayFile"
deploy:
  skip_cleanup: true
  provider: bintray
  file: build/bintray.json
  user: johnrudolflewis
  dry-run: false
  on:
    all_branches: true
  key:
    secure: P+MjhdZy0IDdknthfKENXNtqjwaPMQYFAqcnES+o53PZ5Ol11DVQt09QiAMOS4QA5R0QB8DPjLB4VGQWC7BctnedJFAS6aMR2ebCs9ohtqQ0/jP/utryxi3RRNNOn/MBOcCjMT08VmtY1gBlBwI5aZdAAXS+xLiqnd7wRHzv2dzZC9r5+qxxNWv4ynrQrLqJ5eP81rFjS1h9ujYaY5I7eb8jjA/QsnWx1XvWlrks+8Y02wI2Xrc/xUxhHIdh5SZMJ1WwR1VNARQmhPpQK52Nf7KvYmrsMvjcNNeb6/G/tPtuUtYolpQ+hlhONAyfZmFIdanHjuYab9DIG+ozDTzN6SdKtvKfX18kpXHeoOGbERciGdubFUCmZrPeoGl0Qg9e+y06xre5E5bAqjCsSud+12Hqw6OMGtTWc9+sKStrdVaZGdD3/qQwprGuaTV9QTpmL6HUjLWuo7IF3ax1Kawt0MDlWYP9UBdGdVSK/aMN4sfvPIvzEaBuwwPhdVbhRXTWhyzV9w6pNf0bm8jl9lITWQa1TOJtfJNWHYb3Os001nY1ous3UpGohj+XjKSWKMYmPT7rD0cuSg8LGlBaI4dCFtsptECfy51cebEXvPmo6gPJhPC88J8a15A8+pLF1w/1JSs92Sg9wxJgNHMxzqqp3bkTzSRkHGqnEbx69oD/kDo=
notifications:
  webhooks:
    urls:
    - https://webhooks.gitter.im/e/09f40f14885470ecffd1
    on_start: never
    on_failure: always
    on_success: change
